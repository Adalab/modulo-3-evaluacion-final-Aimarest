{"ast":null,"code":"/**\n * @cypress/react v0.0.0-development\n * (c) 2022 Cypress.io\n * Released under the MIT License\n */\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar cachedDisplayNames = new WeakMap();\n/**\r\n * Gets the display name of the component when possible.\r\n * @param type {JSX} The type object returned from creating the react element.\r\n * @param fallbackName {string} The alias, or fallback name to use when the name cannot be derived.\r\n * @link https://github.com/facebook/react-devtools/blob/master/backend/getDisplayName.js\r\n */\n\nfunction getDisplayName(type, fallbackName) {\n  if (fallbackName === void 0) {\n    fallbackName = 'Unknown';\n  }\n\n  var nameFromCache = cachedDisplayNames.get(type);\n\n  if (nameFromCache != null) {\n    return nameFromCache;\n  }\n\n  var displayName = null; // The displayName property is not guaranteed to be a string.\n  // It's only safe to use for our purposes if it's a string.\n  // github.com/facebook/react-devtools/issues/803\n\n  if (typeof type.displayName === 'string') {\n    displayName = type.displayName;\n  }\n\n  if (!displayName) {\n    displayName = type.name || fallbackName;\n  } // Facebook-specific hack to turn \"Image [from Image.react]\" into just \"Image\".\n  // We need displayName with module name for error reports but it clutters the DevTools.\n\n\n  var match = displayName.match(/^(.*) \\[from (.*)\\]$/);\n\n  if (match) {\n    var componentName = match[1];\n    var moduleName = match[2];\n\n    if (componentName && moduleName) {\n      if (moduleName === componentName || moduleName.startsWith(componentName + \".\")) {\n        displayName = componentName;\n      }\n    }\n  }\n\n  try {\n    cachedDisplayNames.set(type, displayName);\n  } catch (e) {// do nothing\n  }\n\n  return displayName;\n}\n\nconst ROOT_SELECTOR = '[data-cy-root]';\n\nconst getContainerEl = () => {\n  const el = document.querySelector(ROOT_SELECTOR);\n\n  if (el) {\n    return el;\n  }\n\n  throw Error(`No element found that matches selector ${ROOT_SELECTOR}. Please use the mount utils to mount it properly`);\n};\n/**\n * Remove any style or extra link elements from the iframe placeholder\n * left from any previous test\n *\n */\n\n\nfunction cleanupStyles() {\n  const styles = document.body.querySelectorAll('[data-cy=injected-style-tag]');\n  styles.forEach(styleElement => {\n    if (styleElement.parentElement) {\n      styleElement.parentElement.removeChild(styleElement);\n    }\n  });\n  const links = document.body.querySelectorAll('[data-cy=injected-stylesheet]');\n  links.forEach(link => {\n    if (link.parentElement) {\n      link.parentElement.removeChild(link);\n    }\n  });\n}\n/**\n * Insert links to external style resources.\n */\n\n\nfunction insertStylesheets(stylesheets, document, el) {\n  stylesheets.forEach(href => {\n    const link = document.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = href;\n    link.dataset.cy = 'injected-stylesheet';\n    document.body.insertBefore(link, el);\n  });\n}\n/**\n * Inserts a single stylesheet element\n */\n\n\nfunction insertStyles(styles, document, el) {\n  styles.forEach(style => {\n    const styleElement = document.createElement('style');\n    styleElement.dataset.cy = 'injected-style-tag';\n    styleElement.appendChild(document.createTextNode(style));\n    document.body.insertBefore(styleElement, el);\n  });\n}\n\nfunction insertSingleCssFile(cssFilename, document, el, log) {\n  return cy.readFile(cssFilename, {\n    log\n  }).then(css => {\n    const style = document.createElement('style');\n    style.appendChild(document.createTextNode(css));\n    document.body.insertBefore(style, el);\n  });\n}\n/**\n * Reads the given CSS file from local file system\n * and adds the loaded style text as an element.\n */\n\n\nfunction insertLocalCssFiles(cssFilenames, document, el, log) {\n  return Cypress.Promise.mapSeries(cssFilenames, cssFilename => {\n    return insertSingleCssFile(cssFilename, document, el, log);\n  });\n}\n/**\n * Injects custom style text or CSS file or 3rd party style resources\n * into the given document.\n */\n\n\nconst injectStylesBeforeElement = (options, document, el) => {\n  if (!el) return; // first insert all stylesheets as Link elements\n\n  let stylesheets = [];\n\n  if (typeof options.stylesheet === 'string') {\n    stylesheets.push(options.stylesheet);\n  } else if (Array.isArray(options.stylesheet)) {\n    stylesheets = stylesheets.concat(options.stylesheet);\n  }\n\n  if (typeof options.stylesheets === 'string') {\n    options.stylesheets = [options.stylesheets];\n  }\n\n  if (options.stylesheets) {\n    stylesheets = stylesheets.concat(options.stylesheets);\n  }\n\n  insertStylesheets(stylesheets, document, el); // insert any styles as <style>...</style> elements\n\n  let styles = [];\n\n  if (typeof options.style === 'string') {\n    styles.push(options.style);\n  } else if (Array.isArray(options.style)) {\n    styles = styles.concat(options.style);\n  }\n\n  if (typeof options.styles === 'string') {\n    styles.push(options.styles);\n  } else if (Array.isArray(options.styles)) {\n    styles = styles.concat(options.styles);\n  }\n\n  insertStyles(styles, document, el); // now load any css files by path and add their content\n  // as <style>...</style> elements\n\n  let cssFiles = [];\n\n  if (typeof options.cssFile === 'string') {\n    cssFiles.push(options.cssFile);\n  } else if (Array.isArray(options.cssFile)) {\n    cssFiles = cssFiles.concat(options.cssFile);\n  }\n\n  if (typeof options.cssFiles === 'string') {\n    cssFiles.push(options.cssFiles);\n  } else if (Array.isArray(options.cssFiles)) {\n    cssFiles = cssFiles.concat(options.cssFiles);\n  }\n\n  return insertLocalCssFiles(cssFiles, document, el, options.log);\n};\n\nfunction setupHooks(optionalCallback) {\n  // When running component specs, we cannot allow \"cy.visit\"\n  // because it will wipe out our preparation work, and does not make much sense\n  // thus we overwrite \"cy.visit\" to throw an error\n  Cypress.Commands.overwrite('visit', () => {\n    throw new Error('cy.visit from a component spec is not allowed');\n  }); // @ts-ignore\n\n  Cypress.on('test:before:run', () => {\n    optionalCallback === null || optionalCallback === void 0 ? void 0 : optionalCallback();\n    cleanupStyles();\n  });\n}\n/**\r\n * Inject custom style text or CSS file or 3rd party style resources\r\n */\n\n\nvar injectStyles = function (options) {\n  return function () {\n    var el = getContainerEl();\n    return injectStylesBeforeElement(options, document, el);\n  };\n};\n/**\r\n * Mount a React component in a blank document; register it as an alias\r\n * To access: use an alias or original component reference\r\n * @function   mount\r\n * @param      {React.ReactElement}  jsx - component to mount\r\n * @param      {MountOptions}  [options] - options, like alias, styles\r\n * @see https://github.com/bahmutov/@cypress/react\r\n * @see https://glebbahmutov.com/blog/my-vision-for-component-tests/\r\n * @example\r\n ```\r\n  import Hello from './hello.jsx'\r\n  import { mount } from '@cypress/react'\r\n  it('works', () => {\r\n    mount(<Hello onClick={cy.stub()} />)\r\n    // use Cypress commands\r\n    cy.contains('Hello').click()\r\n  })\r\n ```\r\n **/\n\n\nvar mount = function (jsx, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return _mount('mount', jsx, options);\n};\n\nvar lastMountedReactDom;\n/**\r\n * @see `mount`\r\n * @param type The type of mount executed\r\n * @param rerenderKey If specified, use the provided key rather than generating a new one\r\n */\n\nvar _mount = function (type, jsx, options, rerenderKey) {\n  if (options === void 0) {\n    options = {};\n  } // Get the display name property via the component constructor\n  // @ts-ignore FIXME\n\n\n  var componentName = getDisplayName(jsx.type, options.alias);\n  var displayName = options.alias || componentName;\n  var jsxComponentName = \"<\" + componentName + \" ... />\";\n  var message = options.alias ? jsxComponentName + \" as \\\"\" + options.alias + \"\\\"\" : jsxComponentName;\n  return cy.then(injectStyles(options)).then(function () {\n    var _a, _b, _c;\n\n    var reactDomToUse = options.ReactDom || ReactDOM;\n    lastMountedReactDom = reactDomToUse;\n    var el = getContainerEl();\n\n    if (!el) {\n      throw new Error([\"[@cypress/react] \\uD83D\\uDD25 Hmm, cannot find root element to mount the component. Searched for \" + ROOT_SELECTOR].join(' '));\n    }\n\n    var key = rerenderKey !== null && rerenderKey !== void 0 ? rerenderKey : // @ts-ignore provide unique key to the the wrapped component to make sure we are rerendering between tests\n    (((_c = (_b = (_a = Cypress === null || Cypress === void 0 ? void 0 : Cypress.mocha) === null || _a === void 0 ? void 0 : _a.getRunner()) === null || _b === void 0 ? void 0 : _b.test) === null || _c === void 0 ? void 0 : _c.title) || '') + Math.random();\n    var props = {\n      key: key\n    };\n    var reactComponent = React.createElement(options.strict ? React.StrictMode : React.Fragment, props, jsx); // since we always surround the component with a fragment\n    // let's get back the original component\n\n    var userComponent = reactComponent.props.children;\n    reactDomToUse.render(reactComponent, el);\n\n    if (options.log !== false) {\n      Cypress.log({\n        name: type,\n        type: 'parent',\n        message: [message],\n        // @ts-ignore\n        $el: el.children.item(0),\n        consoleProps: function () {\n          return {\n            // @ts-ignore protect the use of jsx functional components use ReactNode\n            props: jsx.props,\n            description: type === 'mount' ? 'Mounts React component' : 'Rerenders mounted React component',\n            home: 'https://github.com/cypress-io/cypress'\n          };\n        }\n      }).snapshot('mounted').end();\n    }\n\n    return (// Separate alias and returned value. Alias returns the component only, and the thenable returns the additional functions\n      cy.wrap(userComponent, {\n        log: false\n      }).as(displayName).then(function () {\n        return cy.wrap({\n          component: userComponent,\n          rerender: function (newComponent) {\n            return _mount('rerender', newComponent, options, key);\n          },\n          unmount: function () {\n            return _unmount({\n              boundComponentMessage: jsxComponentName,\n              log: true\n            });\n          }\n        }, {\n          log: false\n        });\n      }) // by waiting, we delaying test execution for the next tick of event loop\n      // and letting hooks and component lifecycle methods to execute mount\n      // https://github.com/bahmutov/cypress-react-unit-test/issues/200\n      .wait(0, {\n        log: false\n      })\n    ); // Bluebird types are terrible. I don't think the return type can be carried without this cast\n  });\n};\n/**\r\n * Removes the mounted component. Notice this command automatically\r\n * queues up the `unmount` into Cypress chain, thus you don't need `.then`\r\n * to call it.\r\n * @see https://github.com/cypress-io/cypress/tree/develop/npm/react/cypress/component/basic/unmount\r\n * @example\r\n  ```\r\n  import { mount, unmount } from '@cypress/react'\r\n  it('works', () => {\r\n    mount(...)\r\n    // interact with the component using Cypress commands\r\n    // whenever you want to unmount\r\n    unmount()\r\n  })\r\n  ```\r\n */\n// @ts-ignore\n\n\nvar unmount = function (options) {\n  if (options === void 0) {\n    options = {\n      log: true\n    };\n  }\n\n  return _unmount(options);\n};\n\nvar _unmount = function (options) {\n  return cy.then(function () {\n    return cy.get(ROOT_SELECTOR, {\n      log: false\n    }).then(function ($el) {\n      var _a;\n\n      if (lastMountedReactDom) {\n        var wasUnmounted = lastMountedReactDom.unmountComponentAtNode($el[0]);\n\n        if (wasUnmounted && options.log) {\n          Cypress.log({\n            name: 'unmount',\n            type: 'parent',\n            message: [(_a = options.boundComponentMessage) !== null && _a !== void 0 ? _a : 'Unmounted component'],\n            consoleProps: function () {\n              return {\n                description: 'Unmounts React component',\n                parent: $el[0],\n                home: 'https://github.com/cypress-io/cypress'\n              };\n            }\n          });\n        }\n      }\n    });\n  });\n}; // Cleanup before each run\n// NOTE: we cannot use unmount here because\n// we are not in the context of a test\n\n\nvar preMountCleanup = function () {\n  var el = getContainerEl();\n\n  if (el && lastMountedReactDom) {\n    lastMountedReactDom.unmountComponentAtNode(el);\n  }\n};\n/**\r\n * Creates new instance of `mount` function with default options\r\n * @function   createMount\r\n * @param      {MountOptions}  [defaultOptions] - defaultOptions for returned `mount` function\r\n * @returns    new instance of `mount` with assigned options\r\n * @example\r\n * ```\r\n * import Hello from './hello.jsx'\r\n * import { createMount } from '@cypress/react'\r\n *\r\n * const mount = createMount({ strict: true, cssFile: 'path/to/any/css/file.css' })\r\n *\r\n * it('works', () => {\r\n *   mount(<Hello />)\r\n *   // use Cypress commands\r\n *   cy.get('button').should('have.css', 'color', 'rgb(124, 12, 109)')\r\n * })\r\n ```\r\n **/\n\n\nvar createMount = function (defaultOptions) {\n  return function (element, options) {\n    return mount(element, __assign(__assign({}, defaultOptions), options));\n  };\n}; // it is required to unmount component in beforeEach hook in order to provide a clean state inside test\n// because `mount` can be called after some preparation that can side effect unmount\n// @see npm/react/cypress/component/advanced/set-timeout-example/loading-indicator-spec.js\n\n\nsetupHooks(preMountCleanup); // mounting hooks inside a test component mostly copied from\n// https://github.com/testing-library/react-hooks-testing-library/blob/master/src/pure.js\n\nfunction resultContainer() {\n  var value = null;\n  var error = null;\n  var resolvers = [];\n  var result = {\n    get current() {\n      if (error) {\n        throw error;\n      }\n\n      return value;\n    },\n\n    get error() {\n      return error;\n    }\n\n  };\n\n  var updateResult = function (val, err) {\n    if (err === void 0) {\n      err = null;\n    }\n\n    value = val;\n    error = err;\n    resolvers.splice(0, resolvers.length).forEach(function (resolve) {\n      return resolve();\n    });\n  };\n\n  return {\n    result: result,\n    addResolver: function (resolver) {\n      resolvers.push(resolver);\n    },\n    setValue: function (val) {\n      return updateResult(val);\n    },\n    setError: function (err) {\n      return updateResult(undefined, err);\n    }\n  };\n}\n\nfunction TestHook(_a) {\n  var callback = _a.callback,\n      onError = _a.onError,\n      children = _a.children;\n\n  try {\n    children(callback());\n  } catch (err) {\n    if ('then' in err) {\n      throw err;\n    } else {\n      onError(err);\n    }\n  }\n\n  return null;\n}\n/**\r\n * Mounts a React hook function in a test component for testing.\r\n *\r\n */\n\n\nvar mountHook = function (hookFn) {\n  var _a = resultContainer(),\n      result = _a.result,\n      setValue = _a.setValue,\n      setError = _a.setError;\n\n  var componentTest = React.createElement(TestHook, {\n    callback: hookFn,\n    onError: setError,\n    children: setValue\n  });\n  return mount(componentTest).then(function () {\n    return result;\n  });\n};\n\nexport { createMount, mount, mountHook, unmount };","map":{"version":3,"sources":["C:/Users/Ana/Desktop/app Wows/modulo-3-evaluacion-final-Aimarest/node_modules/cypress/react/dist/cypress-react.esm-bundler.js"],"names":["React","ReactDOM","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","cachedDisplayNames","WeakMap","getDisplayName","type","fallbackName","nameFromCache","get","displayName","name","match","componentName","moduleName","startsWith","set","e","ROOT_SELECTOR","getContainerEl","el","document","querySelector","Error","cleanupStyles","styles","body","querySelectorAll","forEach","styleElement","parentElement","removeChild","links","link","insertStylesheets","stylesheets","href","createElement","rel","dataset","cy","insertBefore","insertStyles","style","appendChild","createTextNode","insertSingleCssFile","cssFilename","log","readFile","then","css","insertLocalCssFiles","cssFilenames","Cypress","Promise","mapSeries","injectStylesBeforeElement","options","stylesheet","push","Array","isArray","concat","cssFiles","cssFile","setupHooks","optionalCallback","Commands","overwrite","on","injectStyles","mount","jsx","_mount","lastMountedReactDom","rerenderKey","alias","jsxComponentName","message","_a","_b","_c","reactDomToUse","ReactDom","join","key","mocha","getRunner","test","title","Math","random","props","reactComponent","strict","StrictMode","Fragment","userComponent","children","render","$el","item","consoleProps","description","home","snapshot","end","wrap","as","component","rerender","newComponent","unmount","_unmount","boundComponentMessage","wait","wasUnmounted","unmountComponentAtNode","parent","preMountCleanup","createMount","defaultOptions","element","resultContainer","value","error","resolvers","result","current","updateResult","val","err","splice","resolve","addResolver","resolver","setValue","setError","undefined","TestHook","callback","onError","mountHook","hookFn","componentTest"],"mappings":"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","sourcesContent":["\n/**\n * @cypress/react v0.0.0-development\n * (c) 2022 Cypress.io\n * Released under the MIT License\n */\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar cachedDisplayNames = new WeakMap();\r\n/**\r\n * Gets the display name of the component when possible.\r\n * @param type {JSX} The type object returned from creating the react element.\r\n * @param fallbackName {string} The alias, or fallback name to use when the name cannot be derived.\r\n * @link https://github.com/facebook/react-devtools/blob/master/backend/getDisplayName.js\r\n */\r\nfunction getDisplayName(type, fallbackName) {\r\n    if (fallbackName === void 0) { fallbackName = 'Unknown'; }\r\n    var nameFromCache = cachedDisplayNames.get(type);\r\n    if (nameFromCache != null) {\r\n        return nameFromCache;\r\n    }\r\n    var displayName = null;\r\n    // The displayName property is not guaranteed to be a string.\r\n    // It's only safe to use for our purposes if it's a string.\r\n    // github.com/facebook/react-devtools/issues/803\r\n    if (typeof type.displayName === 'string') {\r\n        displayName = type.displayName;\r\n    }\r\n    if (!displayName) {\r\n        displayName = type.name || fallbackName;\r\n    }\r\n    // Facebook-specific hack to turn \"Image [from Image.react]\" into just \"Image\".\r\n    // We need displayName with module name for error reports but it clutters the DevTools.\r\n    var match = displayName.match(/^(.*) \\[from (.*)\\]$/);\r\n    if (match) {\r\n        var componentName = match[1];\r\n        var moduleName = match[2];\r\n        if (componentName && moduleName) {\r\n            if (moduleName === componentName ||\r\n                moduleName.startsWith(componentName + \".\")) {\r\n                displayName = componentName;\r\n            }\r\n        }\r\n    }\r\n    try {\r\n        cachedDisplayNames.set(type, displayName);\r\n    }\r\n    catch (e) {\r\n        // do nothing\r\n    }\r\n    return displayName;\r\n}\n\nconst ROOT_SELECTOR = '[data-cy-root]';\nconst getContainerEl = () => {\n    const el = document.querySelector(ROOT_SELECTOR);\n    if (el) {\n        return el;\n    }\n    throw Error(`No element found that matches selector ${ROOT_SELECTOR}. Please use the mount utils to mount it properly`);\n};\n/**\n * Remove any style or extra link elements from the iframe placeholder\n * left from any previous test\n *\n */\nfunction cleanupStyles() {\n    const styles = document.body.querySelectorAll('[data-cy=injected-style-tag]');\n    styles.forEach((styleElement) => {\n        if (styleElement.parentElement) {\n            styleElement.parentElement.removeChild(styleElement);\n        }\n    });\n    const links = document.body.querySelectorAll('[data-cy=injected-stylesheet]');\n    links.forEach((link) => {\n        if (link.parentElement) {\n            link.parentElement.removeChild(link);\n        }\n    });\n}\n/**\n * Insert links to external style resources.\n */\nfunction insertStylesheets(stylesheets, document, el) {\n    stylesheets.forEach((href) => {\n        const link = document.createElement('link');\n        link.type = 'text/css';\n        link.rel = 'stylesheet';\n        link.href = href;\n        link.dataset.cy = 'injected-stylesheet';\n        document.body.insertBefore(link, el);\n    });\n}\n/**\n * Inserts a single stylesheet element\n */\nfunction insertStyles(styles, document, el) {\n    styles.forEach((style) => {\n        const styleElement = document.createElement('style');\n        styleElement.dataset.cy = 'injected-style-tag';\n        styleElement.appendChild(document.createTextNode(style));\n        document.body.insertBefore(styleElement, el);\n    });\n}\nfunction insertSingleCssFile(cssFilename, document, el, log) {\n    return cy.readFile(cssFilename, { log }).then((css) => {\n        const style = document.createElement('style');\n        style.appendChild(document.createTextNode(css));\n        document.body.insertBefore(style, el);\n    });\n}\n/**\n * Reads the given CSS file from local file system\n * and adds the loaded style text as an element.\n */\nfunction insertLocalCssFiles(cssFilenames, document, el, log) {\n    return Cypress.Promise.mapSeries(cssFilenames, (cssFilename) => {\n        return insertSingleCssFile(cssFilename, document, el, log);\n    });\n}\n/**\n * Injects custom style text or CSS file or 3rd party style resources\n * into the given document.\n */\nconst injectStylesBeforeElement = (options, document, el) => {\n    if (!el)\n        return;\n    // first insert all stylesheets as Link elements\n    let stylesheets = [];\n    if (typeof options.stylesheet === 'string') {\n        stylesheets.push(options.stylesheet);\n    }\n    else if (Array.isArray(options.stylesheet)) {\n        stylesheets = stylesheets.concat(options.stylesheet);\n    }\n    if (typeof options.stylesheets === 'string') {\n        options.stylesheets = [options.stylesheets];\n    }\n    if (options.stylesheets) {\n        stylesheets = stylesheets.concat(options.stylesheets);\n    }\n    insertStylesheets(stylesheets, document, el);\n    // insert any styles as <style>...</style> elements\n    let styles = [];\n    if (typeof options.style === 'string') {\n        styles.push(options.style);\n    }\n    else if (Array.isArray(options.style)) {\n        styles = styles.concat(options.style);\n    }\n    if (typeof options.styles === 'string') {\n        styles.push(options.styles);\n    }\n    else if (Array.isArray(options.styles)) {\n        styles = styles.concat(options.styles);\n    }\n    insertStyles(styles, document, el);\n    // now load any css files by path and add their content\n    // as <style>...</style> elements\n    let cssFiles = [];\n    if (typeof options.cssFile === 'string') {\n        cssFiles.push(options.cssFile);\n    }\n    else if (Array.isArray(options.cssFile)) {\n        cssFiles = cssFiles.concat(options.cssFile);\n    }\n    if (typeof options.cssFiles === 'string') {\n        cssFiles.push(options.cssFiles);\n    }\n    else if (Array.isArray(options.cssFiles)) {\n        cssFiles = cssFiles.concat(options.cssFiles);\n    }\n    return insertLocalCssFiles(cssFiles, document, el, options.log);\n};\nfunction setupHooks(optionalCallback) {\n    // When running component specs, we cannot allow \"cy.visit\"\n    // because it will wipe out our preparation work, and does not make much sense\n    // thus we overwrite \"cy.visit\" to throw an error\n    Cypress.Commands.overwrite('visit', () => {\n        throw new Error('cy.visit from a component spec is not allowed');\n    });\n    // @ts-ignore\n    Cypress.on('test:before:run', () => {\n        optionalCallback === null || optionalCallback === void 0 ? void 0 : optionalCallback();\n        cleanupStyles();\n    });\n}\n\n/**\r\n * Inject custom style text or CSS file or 3rd party style resources\r\n */\r\nvar injectStyles = function (options) {\r\n    return function () {\r\n        var el = getContainerEl();\r\n        return injectStylesBeforeElement(options, document, el);\r\n    };\r\n};\r\n/**\r\n * Mount a React component in a blank document; register it as an alias\r\n * To access: use an alias or original component reference\r\n * @function   mount\r\n * @param      {React.ReactElement}  jsx - component to mount\r\n * @param      {MountOptions}  [options] - options, like alias, styles\r\n * @see https://github.com/bahmutov/@cypress/react\r\n * @see https://glebbahmutov.com/blog/my-vision-for-component-tests/\r\n * @example\r\n ```\r\n  import Hello from './hello.jsx'\r\n  import { mount } from '@cypress/react'\r\n  it('works', () => {\r\n    mount(<Hello onClick={cy.stub()} />)\r\n    // use Cypress commands\r\n    cy.contains('Hello').click()\r\n  })\r\n ```\r\n **/\r\nvar mount = function (jsx, options) {\r\n    if (options === void 0) { options = {}; }\r\n    return _mount('mount', jsx, options);\r\n};\r\nvar lastMountedReactDom;\r\n/**\r\n * @see `mount`\r\n * @param type The type of mount executed\r\n * @param rerenderKey If specified, use the provided key rather than generating a new one\r\n */\r\nvar _mount = function (type, jsx, options, rerenderKey) {\r\n    if (options === void 0) { options = {}; }\r\n    // Get the display name property via the component constructor\r\n    // @ts-ignore FIXME\r\n    var componentName = getDisplayName(jsx.type, options.alias);\r\n    var displayName = options.alias || componentName;\r\n    var jsxComponentName = \"<\" + componentName + \" ... />\";\r\n    var message = options.alias\r\n        ? jsxComponentName + \" as \\\"\" + options.alias + \"\\\"\"\r\n        : jsxComponentName;\r\n    return cy\r\n        .then(injectStyles(options))\r\n        .then(function () {\r\n        var _a, _b, _c;\r\n        var reactDomToUse = options.ReactDom || ReactDOM;\r\n        lastMountedReactDom = reactDomToUse;\r\n        var el = getContainerEl();\r\n        if (!el) {\r\n            throw new Error([\r\n                \"[@cypress/react] \\uD83D\\uDD25 Hmm, cannot find root element to mount the component. Searched for \" + ROOT_SELECTOR,\r\n            ].join(' '));\r\n        }\r\n        var key = rerenderKey !== null && rerenderKey !== void 0 ? rerenderKey : \r\n        // @ts-ignore provide unique key to the the wrapped component to make sure we are rerendering between tests\r\n        (((_c = (_b = (_a = Cypress === null || Cypress === void 0 ? void 0 : Cypress.mocha) === null || _a === void 0 ? void 0 : _a.getRunner()) === null || _b === void 0 ? void 0 : _b.test) === null || _c === void 0 ? void 0 : _c.title) || '') + Math.random();\r\n        var props = {\r\n            key: key,\r\n        };\r\n        var reactComponent = React.createElement(options.strict ? React.StrictMode : React.Fragment, props, jsx);\r\n        // since we always surround the component with a fragment\r\n        // let's get back the original component\r\n        var userComponent = reactComponent.props.children;\r\n        reactDomToUse.render(reactComponent, el);\r\n        if (options.log !== false) {\r\n            Cypress.log({\r\n                name: type,\r\n                type: 'parent',\r\n                message: [message],\r\n                // @ts-ignore\r\n                $el: el.children.item(0),\r\n                consoleProps: function () {\r\n                    return {\r\n                        // @ts-ignore protect the use of jsx functional components use ReactNode\r\n                        props: jsx.props,\r\n                        description: type === 'mount' ? 'Mounts React component' : 'Rerenders mounted React component',\r\n                        home: 'https://github.com/cypress-io/cypress',\r\n                    };\r\n                },\r\n            }).snapshot('mounted').end();\r\n        }\r\n        return (\r\n        // Separate alias and returned value. Alias returns the component only, and the thenable returns the additional functions\r\n        cy.wrap(userComponent, { log: false })\r\n            .as(displayName)\r\n            .then(function () {\r\n            return cy.wrap({\r\n                component: userComponent,\r\n                rerender: function (newComponent) { return _mount('rerender', newComponent, options, key); },\r\n                unmount: function () { return _unmount({ boundComponentMessage: jsxComponentName, log: true }); },\r\n            }, { log: false });\r\n        })\r\n            // by waiting, we delaying test execution for the next tick of event loop\r\n            // and letting hooks and component lifecycle methods to execute mount\r\n            // https://github.com/bahmutov/cypress-react-unit-test/issues/200\r\n            .wait(0, { log: false }));\r\n        // Bluebird types are terrible. I don't think the return type can be carried without this cast\r\n    });\r\n};\r\n/**\r\n * Removes the mounted component. Notice this command automatically\r\n * queues up the `unmount` into Cypress chain, thus you don't need `.then`\r\n * to call it.\r\n * @see https://github.com/cypress-io/cypress/tree/develop/npm/react/cypress/component/basic/unmount\r\n * @example\r\n  ```\r\n  import { mount, unmount } from '@cypress/react'\r\n  it('works', () => {\r\n    mount(...)\r\n    // interact with the component using Cypress commands\r\n    // whenever you want to unmount\r\n    unmount()\r\n  })\r\n  ```\r\n */\r\n// @ts-ignore\r\nvar unmount = function (options) {\r\n    if (options === void 0) { options = { log: true }; }\r\n    return _unmount(options);\r\n};\r\nvar _unmount = function (options) {\r\n    return cy.then(function () {\r\n        return cy.get(ROOT_SELECTOR, { log: false }).then(function ($el) {\r\n            var _a;\r\n            if (lastMountedReactDom) {\r\n                var wasUnmounted = lastMountedReactDom.unmountComponentAtNode($el[0]);\r\n                if (wasUnmounted && options.log) {\r\n                    Cypress.log({\r\n                        name: 'unmount',\r\n                        type: 'parent',\r\n                        message: [(_a = options.boundComponentMessage) !== null && _a !== void 0 ? _a : 'Unmounted component'],\r\n                        consoleProps: function () {\r\n                            return {\r\n                                description: 'Unmounts React component',\r\n                                parent: $el[0],\r\n                                home: 'https://github.com/cypress-io/cypress',\r\n                            };\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    });\r\n};\r\n// Cleanup before each run\r\n// NOTE: we cannot use unmount here because\r\n// we are not in the context of a test\r\nvar preMountCleanup = function () {\r\n    var el = getContainerEl();\r\n    if (el && lastMountedReactDom) {\r\n        lastMountedReactDom.unmountComponentAtNode(el);\r\n    }\r\n};\r\n/**\r\n * Creates new instance of `mount` function with default options\r\n * @function   createMount\r\n * @param      {MountOptions}  [defaultOptions] - defaultOptions for returned `mount` function\r\n * @returns    new instance of `mount` with assigned options\r\n * @example\r\n * ```\r\n * import Hello from './hello.jsx'\r\n * import { createMount } from '@cypress/react'\r\n *\r\n * const mount = createMount({ strict: true, cssFile: 'path/to/any/css/file.css' })\r\n *\r\n * it('works', () => {\r\n *   mount(<Hello />)\r\n *   // use Cypress commands\r\n *   cy.get('button').should('have.css', 'color', 'rgb(124, 12, 109)')\r\n * })\r\n ```\r\n **/\r\nvar createMount = function (defaultOptions) {\r\n    return function (element, options) {\r\n        return mount(element, __assign(__assign({}, defaultOptions), options));\r\n    };\r\n};\r\n// it is required to unmount component in beforeEach hook in order to provide a clean state inside test\r\n// because `mount` can be called after some preparation that can side effect unmount\r\n// @see npm/react/cypress/component/advanced/set-timeout-example/loading-indicator-spec.js\r\nsetupHooks(preMountCleanup);\n\n// mounting hooks inside a test component mostly copied from\r\n// https://github.com/testing-library/react-hooks-testing-library/blob/master/src/pure.js\r\nfunction resultContainer() {\r\n    var value = null;\r\n    var error = null;\r\n    var resolvers = [];\r\n    var result = {\r\n        get current() {\r\n            if (error) {\r\n                throw error;\r\n            }\r\n            return value;\r\n        },\r\n        get error() {\r\n            return error;\r\n        },\r\n    };\r\n    var updateResult = function (val, err) {\r\n        if (err === void 0) { err = null; }\r\n        value = val;\r\n        error = err;\r\n        resolvers.splice(0, resolvers.length).forEach(function (resolve) { return resolve(); });\r\n    };\r\n    return {\r\n        result: result,\r\n        addResolver: function (resolver) {\r\n            resolvers.push(resolver);\r\n        },\r\n        setValue: function (val) { return updateResult(val); },\r\n        setError: function (err) { return updateResult(undefined, err); },\r\n    };\r\n}\r\nfunction TestHook(_a) {\r\n    var callback = _a.callback, onError = _a.onError, children = _a.children;\r\n    try {\r\n        children(callback());\r\n    }\r\n    catch (err) {\r\n        if ('then' in err) {\r\n            throw err;\r\n        }\r\n        else {\r\n            onError(err);\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Mounts a React hook function in a test component for testing.\r\n *\r\n */\r\nvar mountHook = function (hookFn) {\r\n    var _a = resultContainer(), result = _a.result, setValue = _a.setValue, setError = _a.setError;\r\n    var componentTest = React.createElement(TestHook, {\r\n        callback: hookFn,\r\n        onError: setError,\r\n        children: setValue,\r\n    });\r\n    return mount(componentTest).then(function () { return result; });\r\n};\n\nexport { createMount, mount, mountHook, unmount };\n"]},"metadata":{},"sourceType":"module"}